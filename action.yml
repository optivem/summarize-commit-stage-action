name: 'Summarize Commit Stage'
description: 'Generate a comprehensive summary of the commit stage results including build status and Docker image information'
author: 'Optivem'

branding:
  icon: 'file-text'
  color: 'blue'

inputs:
  stage-result:
    description: 'Result of the stage job (success, failure, cancelled, etc.)'
    required: true
  stage-name:
    description: 'Name of the stage being summarized'
    required: false
    default: 'Commit Stage'
  component-name:
    description: 'Name of the component being processed (e.g., Monolith, API, Frontend)'
    required: true
  artifact-url:
    description: 'URL of the published artifact (e.g., Docker image, installer, package)'
    required: true
  artifact-created-timestamp:
    description: 'Timestamp when the artifact was created'
    required: true
  artifact-type:
    description: 'Type of artifact (e.g., Docker Image, Installer, JAR, NPM Package)'
    required: false
    default: 'Artifact'


runs:
  using: 'composite'
  steps:
    - name: Generate Commit Stage Summary
      uses: optivem/summarize-stage-action@v1
      with:
        stage-result: ${{ inputs.stage-result }}
        stage-name: '${{ inputs.stage-name }} - ${{ inputs.component-name }}'
        stage-success-message: 'Successfully Published ${{ inputs.artifact-type }}:'
        stage-success-content: |
          **Artifact URL:**
          `${{ inputs.artifact-url }}`
          
          **Created:**
          `${{ inputs.artifact-created-timestamp }}`